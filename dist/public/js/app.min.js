this.JST=this.JST||{},this.JST.actorDetailsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<h3 class="app-heading"><i class="fa fa-info"></i> Szczegóły aktora</h3>\r\n\r\n<div class="app-item-info">\r\n    <p><span>Imię i nazwisko:</span>'+(null==(__t=name)?"":__t)+'</p>\r\n\r\n    <button type="button" class="btn edit">Edytuj</button>\r\n</div>';return __p},this.JST.actorEditNewViewTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)this.model.isNew()?__p+='\r\n<h3 class="app-heading"><i class="fa fa-plus"></i> Nowy aktor</h3>\r\n':__p+='\r\n<h3 class="app-heading"><i class="fa fa-edit"></i> Edycja aktora</h3>\r\n',__p+='\r\n\r\n\r\n<div class="app-form">\r\n    <form action="" id="new-actor">\r\n        <div class="app-form-field">\r\n            <label for="actor-name">Nazwa</label>\r\n            <input type="text" id="actor-name" value="">\r\n        </div>\r\n\r\n\r\n        <div class="app-form-submit">\r\n            <button type="submit" class="btn">Zapisz</button>\r\n            ',this.model.isNew()||(__p+='\r\n            <button type="button" class="btn special delete">Usuń</button>\r\n            '),__p+="\r\n        </div>\r\n    </form>\r\n</div>";return __p},this.JST.actorListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<li>\r\n    <span class="name">'+(null==(__t=name)?"":__t)+'</span>\r\n    <span class="btn-rounded details">\r\n        <i class="fa fa-search"></i>\r\n    </span>\r\n</li>';return __p},this.JST.breadcrumbsWidgetTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)for(var i=0;i<pathItems.length;i++)__p+='\r\n<span class="app-status-item">'+(null==(__t=pathItems[i])?"":__t)+"</span>\r\n";return __p},this.JST.categoryDetailsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<h3 class="app-heading"><i class="fa fa-info"></i> Szczegóły kategorii</h3>\r\n\r\n<div class="app-item-info">\r\n    <p><span>Nazwa:</span>'+(null==(__t=name)?"":__t)+'</p>\r\n\r\n    <button type="button" class="btn edit">Edytuj</button>\r\n</div>';return __p},this.JST.categoryEditNewViewTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)this.model.isNew()?__p+='\r\n<h3 class="app-heading"><i class="fa fa-plus"></i> Nowa kategoria</h3>\r\n':__p+='\r\n<h3 class="app-heading"><i class="fa fa-edit"></i> Edycja kategorii</h3>\r\n',__p+='\r\n<div class="app-form">\r\n    <form action="" id="new-category">\r\n        <div class="app-form-field">\r\n            <label for="category-name">Nazwa</label>\r\n            <input type="text" id="category-name" value="">\r\n        </div>\r\n\r\n\r\n        <div class="app-form-submit">\r\n            <button type="submit" class="btn">Zapisz</button>\r\n            ',this.model.isNew()||(__p+='\r\n            <button type="button" class="btn special delete">Usuń</button>\r\n            '),__p+="\r\n        </div>\r\n    </form>\r\n</div>";return __p},this.JST.categoryListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<li>\r\n    <span class="name">'+(null==(__t=name)?"":__t)+'</span>\r\n    <span class="btn-rounded details">\r\n        <i class="fa fa-search"></i>\r\n    </span>\r\n</li>';return __p},this.JST.clientDetailsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<h3 class="app-heading"><i class="fa fa-info"></i> Szczegóły klienta</h3>\r\n\r\n<div class="app-item-info">\r\n    <p><span>Imię:</span>'+(null==(__t=first_name)?"":__t)+"</p>\r\n    <p><span>Nazwisko:</span>"+(null==(__t=last_name)?"":__t)+"</p>\r\n    <p><span>Data urodzenia:</span>"+(null==(__t=birthdate)?"":__t)+"</p>\r\n    <p><span>Number dowodu:</span>"+(null==(__t=idc_number)?"":__t)+"</p>\r\n    <p><span>Adres:</span> <i>"+(null==(__t=address)?"":__t)+"</i></p>\r\n    <p><span>Kod pocztowy:</span>"+(null==(__t=zip_code)?"":__t)+"</p>\r\n    <p><span>Miasto:</span>"+(null==(__t=city)?"":__t)+'</p>\r\n\r\n    <button type="button" class="btn edit">Edytuj</button>\r\n</div>';return __p},this.JST.clientEditNewViewTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)this.model.isNew()?__p+='\r\n<h3 class="app-heading"><i class="fa fa-plus"></i> Nowy klient</h3>\r\n':__p+='\r\n<h3 class="app-heading"><i class="fa fa-edit"></i> Edycja klienta</h3>\r\n',__p+='\r\n<div class="app-form">\r\n    <form action="" id="new-movie">\r\n        <div class="app-form-field">\r\n            <label for="client-first-name">Imię</label>\r\n            <input type="text" id="client-first-name" value="" placeholder="Imię">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-last-name">Nazwisko</label>\r\n            <input type="text" id="client-last-name" class="short" placeholder="Nazwisko">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-birthdate">Data urodzenia</label>\r\n            <input type="text" class="medium" id="client-birthdate" placeholder="Data urodzenia">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-idc-number">Numer dowodu</label>\r\n            <input type="text" class="medium" id="client-idc-number" placeholder="Numer dowodu">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-address">Adres</label>\r\n            <input type="text" class="medium" id="client-address" placeholder="Adres">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-zip-code">Kod pocztowy</label>\r\n            <input type="text" class="medium" id="client-zip-code" placeholder="Kod pocztowy">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="client-city">Miasto</label>\r\n            <input type="text" class="medium" id="client-city" placeholder="Miasto">\r\n        </div>\r\n\r\n        <div class="app-form-submit">\r\n            <button type="submit" class="btn">Zapisz</button>\r\n            ',this.model.isNew()||(__p+='\r\n            <button type="button" class="btn special delete">Usuń</button>\r\n            '),__p+="\r\n        </div>\r\n    </form>\r\n</div>";return __p},this.JST.clientListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<li>\r\n    <span class="name">'+(null==(__t=name)?"":__t)+'</span>\r\n    <span class="btn-rounded details">\r\n        <i class="fa fa-search"></i>\r\n    </span>\r\n</li>';return __p},this.JST.latestRentsWidgetListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<span class="client">'+(null==(__t=client_name)?"":__t)+'</span>\r\n<span class="movie">'+(null==(__t=movie_title)?"":__t)+'</span>\r\n<span class="date">'+(null==(__t=APP.Utils.formatDateMoment(date))?"":__t)+"</span>";return __p},this.JST.latestRentsWidgetTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<h3>\r\n    <i class="fa fa-thumbs-o-up"></i>\r\n    Ostatnie wypożyczenia\r\n</h3>';return __p},this.JST.listActionsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div class="app-search">\r\n    <input type="text" placeholder="'+(null==(__t=placeholder)?"":__t)+'">\r\n</div>\r\n\r\n<span class="btn-rounded active add">\r\n    <i class="fa fa-plus"></i>\r\n</span>\r\n\r\n<ul class="app-sort">\r\n    ',"1"==order?__p+='\r\n    <li data-order="1">Rosnąco</li>\r\n    <li data-order="-1">Malejąco</li>\r\n    ':__p+='\r\n    <li data-order="-1">Malejąco</li>\r\n    <li data-order="1">Rosnąco</li>\r\n    ',__p+="\r\n</ul>";return __p},this.JST.listPaginationTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)for(var i=1;i<=anchors;i++)__p+="\r\n<a href='#' class='",i==active&&print("active"),__p+="' data-page=\""+(null==(__t=i)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</a>\r\n";return __p},this.JST.movieDetailsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<h3 class="app-heading"><i class="fa fa-info"></i> Szczegóły filmu</h3>\r\n\r\n<div class="app-item-info">\r\n    <p><span>Tytuł:</span>'+(null==(__t=title)?"":__t)+"</p>\r\n    <p><span>Data wydania:</span>"+(null==(__t=date)?"":__t)+"</p>\r\n    <p><span>Kategorie:</span>"+(null==(__t=categories.join(", "))?"":__t)+"</p>\r\n    <p><span>Aktorzy:</span>"+(null==(__t=actors.join(", "))?"":__t)+"</p>\r\n    <p><span>Opis:</span> <i>"+(null==(__t=description)?"":__t)+"</i></p>\r\n    <p><span>Ilość płyt:</span>"+(null==(__t=quantity)?"":__t)+"</p>\r\n    <p><span>Wypożyczonych:</span> "+(null==(__t=rent_number)?"":__t)+" </p>\r\n    <p><span>Dostępny:</span> ",available?print("tak"):print("nie"),__p+=' </p>\r\n\r\n    <button type="button" class="btn edit">Edytuj</button>\r\n</div>';return __p},this.JST.movieEditNewViewTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)this.model.isNew()?__p+='\r\n<h3 class="app-heading"><i class="fa fa-plus"></i> Nowy film</h3>\r\n':__p+='\r\n<h3 class="app-heading"><i class="fa fa-edit"></i> Edycja filmu</h3>\r\n',__p+='\r\n<div class="app-form">\r\n    <form action="" id="new-movie">\r\n        <div class="app-form-field">\r\n            <label for="movie-title">Tytuł</label>\r\n            <input type="text" id="movie-title" value="">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="movie-date">Data</label>\r\n            <input type="text" id="movie-date" class="short" placeholder="dd-mm-rrrr">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="ms-movie-categories">Kategorie</label>\r\n            <input type="text" class="medium" id="ms-movie-categories" placeholder="Wybierz kategorie">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="ms-movie-actors">Aktorzy</label>\r\n            <input type="text" class="medium" id="ms-movie-actors" placeholder="Wybierz aktorów">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="movie-description">Opis</label>\r\n            <textarea id="movie-description"></textarea>\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="movie-quantity">Ilość</label>\r\n            <input type="text" id="movie-quantity" class="short" placeholder="20">\r\n        </div>\r\n\r\n        <div class="app-form-submit">\r\n            <button type="submit" class="btn">Zapisz</button>\r\n            ',this.model.isNew()||(__p+='\r\n            <button type="button" class="btn special delete">Usuń</button>\r\n            '),__p+="\r\n\r\n        </div>\r\n    </form>\r\n</div>";return __p},this.JST.movieListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<li>\r\n    <span class="title">'+(null==(__t=title)?"":__t)+'</span>\r\n    <span class="btn-rounded details">\r\n        <i class="fa fa-search"></i>\r\n    </span>\r\n</li>';return __p},this.JST.rentDetailsTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<h3 class="app-heading"><i class="fa fa-info"></i> Szczegóły wypożyczenia</h3>\r\n\r\n<div class="app-item-info">\r\n    <p><span>Film:</span> '+(null==(__t=movie_title)?"":__t)+" </p>\r\n    <p><span>Klient:</span> "+(null==(__t=client_name)?"":__t)+" </p>\r\n    <p><span>Data:</span> "+(null==(__t=date)?"":__t)+' </p>\r\n\r\n    <button type="button" class="btn edit">Edytuj</button>';return __p},this.JST.rentEditNewViewTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)this.model.isNew()?__p+='\r\n<h3 class="app-heading"><i class="fa fa-plus"></i> Nowe wypożyczenie</h3>\r\n':__p+='\r\n<h3 class="app-heading"><i class="fa fa-edit"></i> Edycja wypożyczenia</h3>\r\n',__p+='\r\n<div class="app-form">\r\n    <form action="" id="new-rent">\r\n        <div class="app-form-field">\r\n            <label for="ms-movie-id">Film</label>\r\n            <input type="text" class="medium" id="ms-movie-id" placeholder="Wybierz film">\r\n        </div>\r\n\r\n        <div class="app-form-field">\r\n            <label for="ms-client-id">Klient</label>\r\n            <input type="text" class="medium" id="ms-client-id" placeholder="Wybierz klienta">\r\n        </div>\r\n\r\n        <div class="app-form-submit">\r\n            <button type="submit" class="btn">Zapisz</button>\r\n            ',this.model.isNew()||(__p+='\r\n            <button type="button" class="btn special delete">Zwróć</button>\r\n            '),__p+="\r\n        </div>\r\n    </form>\r\n</div>";return __p},this.JST.rentListItemTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<li>\r\n    <span class="title">'+(null==(__t=movie_title)?"":__t)+'</span>\r\n    <span class="client">\r\n        <i class="fa fa-user"></i>'+(null==(__t=client_name)?"":__t)+'\r\n    </span>\r\n    <span class="date">\r\n        <i class="fa fa-calendar"></i>'+(null==(__t=APP.Utils.formatDate(date))?"":__t)+'\r\n    </span>\r\n    <span class="btn-rounded details">\r\n        <i class="fa fa-search"></i>\r\n    </span>\r\n</li>';return __p},this.JST.statisticsWidgetTemplate=function(obj){obj=obj||{};var __t,__p="",__e=_.escape;with(obj)__p+='<span class="app-status-item"><i class="fa fa-film"></i> Filmów <strong>'+(null==(__t=movies)?"":__t)+'</strong></span>\r\n<span class="app-status-item"><i class="fa fa-thumbs-o-up"></i> Wypożyczeń<strong>'+(null==(__t=rents)?"":__t)+'</strong></span>\r\n<span class="app-status-item"><i class="fa fa-user"></i> Klientów <strong>'+(null==(__t=clients)?"":__t)+"</strong></span>";return __p},window.APP={Models:{},Collections:{},Views:{},Routers:{},Regions:{appHeader:$(".app-header"),appContent:$(".app-content"),appSidebar:$(".app-content-sidebar")},ViewsInstances:{},Vent:_.extend({},Backbone.Events)},APP.showMainView=function(e){var t;APP.ViewsInstances.mainView&&((t=APP.ViewsInstances.mainView.childViews)&&_.each(t,function(e){e.remove()}),APP.ViewsInstances.mainView.remove()),APP.ViewsInstances.mainView=e},APP.showLatestRentsView=function(){APP.ViewsInstances.latestRents&&APP.ViewsInstances.latestRents.remove();var e=new APP.Collections.RentsList;APP.ViewsInstances.latestRents=new APP.Views.LatestRents({collection:e}),e.fetch({reset:!0,data:{limit:3,order:-1}})},APP.showStatisticsView=function(){APP.ViewsInstances.statistics&&APP.ViewsInstances.statistics.remove(),APP.ViewsInstances.statistics=new APP.Views.Statistics},APP.showBreadcrumbsView=function(){APP.ViewsInstances.breadcrumbs&&APP.ViewsInstances.breadcrumbs.remove(),APP.ViewsInstances.breadcrumbs=new APP.Views.Breadcrumbs},APP.showItemsList=function(e,t,i,n){var s=e.split("-")[0],a=APP.Utils.capitalize(s)+"List",o=5*((t=t||1)-1),i=i||("rents"===s?-1:1),n=n||"",r="categories"===s?0:5,l=new APP.Collections[a],d=new APP.Views[a]({collection:l,page:t,order:i,search:n});APP.showMainView(d),l.fetch({reset:!0,data:{limit:r,skip:o,order:i,name:n}}),APP.Views.Navigation.highlight(s)},APP.showItemDetails=function(e,t){var i=e.split("-")[0],n=APP.Utils.capitalize(i),s=APP.Utils.capitalize(i)+"Details",e=new APP.Models[n]({_id:t}),a=new APP.Views[s]({model:e});e.fetch({reset:!0}),APP.showMainView(a),APP.Views.Navigation.highlight(i)},APP.showItemEdit=function(e,t){var i=e.split("-")[0],n=APP.Utils.capitalize(i),s=APP.Utils.capitalize(i)+"Edit",e=new APP.Models[n]({_id:t}),a=new APP.Views[s]({model:e});e.fetch({reset:!0}),APP.showMainView(a),APP.Views.Navigation.highlight(i)},APP.showItemNew=function(e,t){var i=e.split("-")[0],n=APP.Utils.capitalize(i),s=APP.Utils.capitalize(i)+"New",e=new APP.Models[n],a=new APP.Views[s]({model:e});APP.showMainView(a),APP.Views.Navigation.highlight(i)},APP.CRUD={createItem:function(e){e.preventDefault(),this.model.save({},{wait:!0})},updateItem:function(e){e.preventDefault();var t=this.model;this.model.save(null,{wait:!0,success:function(){t.trigger("update")}})},deleteItem:function(){var e=this.model;APP.Messages.showRemovePrompt(function(){e.destroy({wait:!0})})}},APP.Router={handleRoute:function(e,t){t.unshift(e),e.match(/(.+)-list/)?APP.showItemsList.apply(APP,t):e.match(/(.+)-details/)?APP.showItemDetails.apply(APP,t):e.match(/(.+)-edit/)?APP.showItemEdit.apply(APP,t):e.match(/(.+)-new/)&&APP.showItemNew.apply(APP,t)},setupRoutes:function(){APP.router=new APP.Routers.Router,APP.Vent.listenTo(APP.router,"route",APP.Router.handleRoute)},redirectToList:function(){var e=this.model.url(!0);APP.router.navigate(e,{trigger:!0})},redirectToDetails:function(){var e=this.model.url();APP.router.navigate(e,{trigger:!0})},redirectToEdit:function(){var e=this.model.url();APP.router.navigate(e+"/edit",{trigger:!0})}},APP.init=function(){APP.Router.setupRoutes(),APP.showBreadcrumbsView(),APP.showStatisticsView(),APP.showLatestRentsView(),Backbone.history.start({pushState:!0})},APP.Utils={capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},formatDate:function(e){var t=new Date(e),i=t.getDate(),n=t.getMonth()+1;return i+"."+(n=n<10?"0"+n:n)+"."+t.getFullYear()},formatDateMoment:function(e){var t=new Date(e);return moment(t).locale("pl").calendar()}},APP.UI={autocomplete:function(n,e,s){var s=_.extend({method:"get",allowFreeEntries:!1,toggleOnClick:!0,queryParam:"name"},s),t=n.$el.find(e).magicSuggest(s);$(t).on("selectionchange",function(e,t,i){s.oneAllowed&&1<i.length&&this.removeFromSelection(i[0],!0),i.length?(s.oneAllowed?n.model.set(s.name,i[0]._id):n.model.set(s.name,_.pluck(i,"name")),this.container.addClass("selected")):(n.model.set(s.name,n.model.defaults[s.name]),this.container.removeClass("selected"))}),s.loadData&&$(t).on("load",function(){var e=n.model.get(s.name);_.isArray(e)||(e=[e]),t.setValue(e)})},datePicker:function(t,i,e){new BeatPicker({dateInputNode:t.$el.find(e),modules:{footer:!1,icon:!1,clear:!1},dateFormat:{format:["DD","MM","YYYY"]}}).on("change",function(e){t.model.set(i,e.string)})}},APP.Messages={displayDialog:function(e,t,i,n){return new $.Zebra_Dialog(t,{type:i,title:e,buttons:n})},showErrorInfo:function(){APP.Messages.displayDialog("Wystąpił błąd",this.model.validationError,"error")},showAddedInfo:function(){APP.Messages.displayDialog("Zapisano","Rekord został poprawnie zapisany","information")},showUpdateInfo:function(e){APP.Messages.displayDialog("Zaktualizowano","Aktualizacja przebiegła pomyślnie","information")},showRemoveInfo:function(e){APP.Messages.displayDialog("Usunięto","Rekord został usunięty","information")},showRemovePrompt:function(e){var t=[{caption:"Tak",callback:e},{caption:"Anuluj"}];APP.Messages.displayDialog("Potwierdzenie usunięcia","Czy na pewno chcesz usunąć?","warning",t)}},APP.Models.Actor=Backbone.Model.extend({idAttribute:"_id",defaults:{name:""},validate:function(e,t){if(""===e.name)return"Musisz podać imię i nazwisko aktora."},url:function(e){return this.isNew()||e?"/actors":"/actor/"+this.get("_id")}}),APP.Models.Category=Backbone.Model.extend({idAttribute:"_id",defaults:{name:""},validate:function(e,t){if(""===e.name)return"Musisz podać nazwę kategorii."},url:function(e){return this.isNew()||e?"/categories":"/category/"+this.get("_id")}}),APP.Models.Client=Backbone.Model.extend({idAttribute:"_id",defaults:{first_name:"",last_name:"",birthdate:"",idc_number:"",address:"",zip_code:"",city:""},validate:function(e,t){return""===e.first_name||""===e.last_name?"Musisz podać imię i nazwisko klienta.":e.birthdate.match(/^(\d{2}-\d{2}-\d{4})$/)?e.idc_number.match(/^([a-z]{3}\d{6})$/i)?""===e.address?"Musisz podać poprawny adres.":e.zip_code.match(/^(\d{2}-\d{3})$/)?""===e.city?"Musisz podać poprawną nazwę miejscowości.":void 0:"Musisz podać poprawny kod pocztowy.":"Musisz podać poprawny numer dowodu osobistego.":"Musisz podać poprawną datę urodzenia."},url:function(e){return this.isNew()||e?"/clients":"/client/"+this.get("_id")}}),APP.Models.Movie=Backbone.Model.extend({idAttribute:"_id",defaults:{title:"",date:"",categories:[],actors:[],description:"",quantity:0},validate:function(e,t){return""===e.title?"Musisz podać tytuł filmu.":e.date.match(/^(\d{2}-\d{2}-\d{4})$/)?e.categories.length?e.actors.length?""===e.description?"Musisz podać opis filmu":parseInt(e.quantity)<0?"Musisz podać poprawną ilość":void 0:"Musisz wybrać przynajmniej jednego aktora.":"Musisz wybrać przynajmniej jedną kategorie.":"Musisz podać poprawną datę produkcji."},url:function(e){return this.isNew()||e?"/movies":"/movie/"+this.get("_id")}}),APP.Models.Rent=Backbone.Model.extend({idAttribute:"_id",defaults:{movie_id:"",client_id:"",date:""},validate:function(e,t){return""===e.movie_id?"Musisz wybrać film.":""===e.client_id?"Musisz wybrać klienta.":void 0},url:function(e){return this.isNew()||e?"/rents":"/rent/"+this.get("_id")}}),APP.Collections.ActorsList=Backbone.Collection.extend({model:APP.Models.Actor,url:"/actors"}),APP.Collections.CategoriesList=Backbone.Collection.extend({model:APP.Models.Category,url:"/categories"}),APP.Collections.ClientsList=Backbone.Collection.extend({model:APP.Models.Client,url:"/clients"}),APP.Collections.MoviesList=Backbone.Collection.extend({model:APP.Models.Movie,url:"/movies"}),APP.Collections.RentsList=Backbone.Collection.extend({model:APP.Models.Rent,url:"/rents"}),APP.Views.ActorDetails=Backbone.View.extend({tagName:"div",template:JST.actorDetailsTemplate,initialize:function(){this.listenTo(this.model,"change",this.render),this.delegateEvents({"click .edit":_.bind(APP.Router.redirectToEdit,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el)}}),APP.Views.ActorEdit=Backbone.View.extend({tagName:"div",template:JST.actorEditNewViewTemplate,initialize:function(){this.listenToOnce(this.model,"change",this.render),this.listenToOnce(this.model,"destroy",_.bind(APP.Router.redirectToList,this)),this.listenToOnce(this.model,"destroy",APP.Messages.showRemoveInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.listenTo(this.model,"update",APP.Messages.showUpdateInfo),this.delegateEvents({"submit form":_.bind(APP.CRUD.updateItem,this),"click .delete":_.bind(APP.CRUD.deleteItem,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit()},bindings:{"#actor-name":"name"}}),APP.Views.ActorListItem=Backbone.View.extend({tagName:"li",template:JST.actorListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this}}),APP.Views.ActorNew=Backbone.View.extend({tagName:"div",template:JST.actorEditNewViewTemplate,initialize:function(){this.listenTo(this.model,"sync",_.bind(APP.Router.redirectToEdit,this)),this.listenTo(this.model,"sync",APP.Messages.showAddedInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.delegateEvents({"submit form":_.bind(APP.CRUD.createItem,this)}),this.render()},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit()},bindings:{"#actor-name":"name"}}),APP.Views.ActorsList=Backbone.View.extend({tagName:"ul",className:"app-items-list",initialize:function(e){this.options=e,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=new APP.Views.ListPagination({collectionName:"actors",page:this.options.page,order:this.options.order,search:this.options.search}),t=new APP.Views.ListActions({collectionName:"actors",page:this.options.page,order:this.options.order,search:this.options.search,placeholder:"Szukaj aktorów..."});this.childViews=[t,e],this.collection.each(this.addOne,this),APP.Regions.appContent.append(t.render().el),APP.Regions.appContent.append(this.el),APP.Regions.appContent.append(e.render().el)},addOne:function(e){var t=new APP.Views.ActorListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.Breadcrumbs=Backbone.View.extend({tagName:"div",className:"app-breadcrumbs",template:JST.breadcrumbsWidgetTemplate,initialize:function(){this.listenTo(APP.router,"route",this.render)},render:function(){var e=this.template({pathItems:this.getPathItems()});return this.$el.html(e),APP.Regions.appHeader.prepend(this.el),this},getPathItems:function(){var e,t,i,n=/movies|movie|actors|actor|categories|category|rents|rent|clients|client/gi.exec(window.location.pathname),s=["Kokpit"];return null!==n&&(e=n[0],i=(t=n.input.match(/\/(edit|new)$/))?":"+t[1]:"",s.push({movies:"Filmy",actors:"Aktorzy",categories:"Kategorie",rents:"Wypożyczenia",clients:"Klienci",movie:"Szczegóły filmu",actor:"Dane aktora",category:"Szczegóły kategorii",rent:"Szczegóły wypożyczenia",client:"Dane klienta","movie:edit":"Edycja filmu","movies:new":"Nowy film","actor:edit":"Edycja aktora","actors:new":"Nowy aktor","category:edit":"Edycja kategorii","categories:new":"Nowa kategoria","rent:edit":"Edycja wypożyczenia","rents:new":"Nowe wypożyczenie","client:edit":"Edycja klienta","clients:new":"Nowy klient"}[e+i])),s}}),APP.Views.CategoriesList=Backbone.View.extend({tagName:"ul",className:"app-items-list",initialize:function(e){this.options=e,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=new APP.Views.ListActions({collectionName:"categories",page:this.options.page,order:this.options.order,search:this.options.search,placeholder:"Szukaj kategorii..."});this.childViews=[e],this.collection.each(this.addOne,this),APP.Regions.appContent.append(e.render().el),APP.Regions.appContent.append(this.el)},addOne:function(e){var t=new APP.Views.CategoryListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.CategoryDetails=Backbone.View.extend({tagName:"div",template:JST.categoryDetailsTemplate,initialize:function(){this.listenTo(this.model,"change",this.render),this.delegateEvents({"click .edit":_.bind(APP.Router.redirectToEdit,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el)}}),APP.Views.CategoryEdit=Backbone.View.extend({tagName:"div",template:JST.categoryEditNewViewTemplate,initialize:function(){this.listenToOnce(this.model,"change",this.render),this.listenToOnce(this.model,"destroy",_.bind(APP.Router.redirectToList,this)),this.listenToOnce(this.model,"destroy",APP.Messages.showRemoveInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.listenTo(this.model,"update",APP.Messages.showUpdateInfo),this.delegateEvents({"submit form":_.bind(APP.CRUD.updateItem,this),"click .delete":_.bind(APP.CRUD.deleteItem,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit()},bindings:{"#category-name":"name"},showRemoveInfo:function(e){new $.Zebra_Dialog("Rekord został usunięty",{type:"information",title:"Usunięto"})},showErrorInfo:function(e){new $.Zebra_Dialog(e.validationError,{type:"error",title:"Wystąpił błąd"})},showUpdateInfo:function(e){new $.Zebra_Dialog("Aktualizacja przebiegła pomyślnie",{type:"information",title:"Zaktualizowano"})},redirectToCategories:function(){APP.router.navigate("/categories",{trigger:!0})}}),APP.Views.CategoryListItem=Backbone.View.extend({tagName:"li",template:JST.categoryListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this}}),APP.Views.CategoryNew=Backbone.View.extend({tagName:"div",template:JST.categoryEditNewViewTemplate,initialize:function(){this.listenTo(this.model,"sync",_.bind(APP.Router.redirectToEdit,this)),this.listenTo(this.model,"sync",APP.Messages.showAddedInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.delegateEvents({"submit form":_.bind(APP.CRUD.createItem,this)}),this.render()},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit()},bindings:{"#category-name":"name"}}),APP.Views.ClientDetails=Backbone.View.extend({tagName:"div",template:JST.clientDetailsTemplate,initialize:function(){this.listenTo(this.model,"change",this.render),this.delegateEvents({"click .edit":_.bind(APP.Router.redirectToEdit,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el)}}),APP.Views.ClientEdit=Backbone.View.extend({tagName:"div",template:JST.clientEditNewViewTemplate,initialize:function(){this.listenToOnce(this.model,"change",this.render),this.listenToOnce(this.model,"destroy",_.bind(APP.Router.redirectToList,this)),this.listenToOnce(this.model,"destroy",APP.showStatisticsView),this.listenToOnce(this.model,"destroy",APP.showLatestRentsView),this.listenToOnce(this.model,"destroy",APP.Messages.showRemoveInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.listenTo(this.model,"update",APP.Messages.showUpdateInfo),this.delegateEvents({"submit form":_.bind(APP.CRUD.updateItem,this),"click .delete":_.bind(APP.CRUD.deleteItem,this)})},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit(),APP.UI.datePicker(this,"birthdate","#client-birthdate"),this},bindings:{"#client-first-name":"first_name","#client-last-name":"last_name","#client-birthdate":"birthdate","#client-idc-number":"idc_number","#client-address":"address","#client-zip-code":"zip_code","#client-city":"city"},events:{"submit form":"updateClient","click .delete":"deleteClient"},redirectToClients:function(){APP.router.navigate("/clients",{trigger:!0})}}),APP.Views.ClientListItem=Backbone.View.extend({tagName:"li",template:JST.clientListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this}}),APP.Views.ClientNew=Backbone.View.extend({tagName:"div",template:JST.clientEditNewViewTemplate,initialize:function(){this.listenTo(this.model,"sync",_.bind(APP.Router.redirectToEdit,this)),this.listenToOnce(this.model,"sync",APP.showStatisticsView),this.listenTo(this.model,"sync",APP.Messages.showAddedInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.delegateEvents({"submit form":_.bind(APP.CRUD.createItem,this)}),this.render()},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit(),APP.UI.datePicker(this,"birthdate","#client-birthdate"),this},bindings:{"#client-first-name":"first_name","#client-last-name":"last_name","#client-birthdate":"birthdate","#client-idc-number":"idc_number","#client-address":"address","#client-zip-code":"zip_code","#client-city":"city"}}),APP.Views.ClientsList=Backbone.View.extend({tagName:"ul",className:"app-items-list",initialize:function(e){this.options=e,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=new APP.Views.ListPagination({collectionName:"clients",page:this.options.page,order:this.options.order,search:this.options.search}),t=new APP.Views.ListActions({collectionName:"clients",page:this.options.page,order:this.options.order,search:this.options.search,placeholder:"Szukaj klientów..."});this.childViews=[t,e],this.collection.each(this.addOne,this),APP.Regions.appContent.append(t.render().el),APP.Regions.appContent.append(this.el),APP.Regions.appContent.append(e.render().el)},addOne:function(e){var t=new APP.Views.ClientListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.LatestRentsListItem=Backbone.View.extend({tagName:"li",template:JST.latestRentsWidgetListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this},formatDateMoment:function(e){var t=new Date(e);return moment(t).locale("pl").calendar()}}),APP.Views.LatestRents=Backbone.View.extend({tagName:"ul",className:"app-latest-rents",template:JST.latestRentsWidgetTemplate,initialize:function(){this.listenTo(this.collection,"reset",this.render)},render:function(){return this.collection.each(this.addOne,this),APP.Regions.appSidebar.html(this.template()).append(this.el),this},addOne:function(e){var t=new APP.Views.LatestRentsListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.ListActions=Backbone.View.extend({tagName:"div",className:"app-actions",template:JST.listActionsTemplate,initialize:function(e){this.options=e},render:function(){return this.$el.append(this.template({order:this.options.order,placeholder:this.options.placeholder})),this},events:{"keyup .app-search input":"setSearchCollectionTimeout","click .app-sort li":"sortCollection","click .add":"showAdd"},setSearchCollectionTimeout:function(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(_.bind(this.searchCollection,this),500)},searchCollection:function(e){var t,i=this.$(".app-search input").val().toLowerCase();i?(t=this.options.collectionName+"/page/"+this.options.page+"/order/"+this.options.order+"/search/"+i,APP.router.navigate(t,{trigger:!0})):APP.router.navigate(this.options.collectionName,{trigger:!0})},sortCollection:function(e){var t=$(e.target).data("order"),i=this.options.collectionName+"/page/"+this.options.page+"/order/"+t;this.options.search&&(i+="/search/"+this.options.search),APP.router.navigate(i,{trigger:!0})},showAdd:function(){var e=this.options.collectionName+"/new";APP.router.navigate(e,{trigger:!0})}}),APP.Views.ListPagination=Backbone.View.extend({tag:"div",className:"app-items-pagination",template:JST.listPaginationTemplate,initialize:function(e){this.options=e,$.ajax({url:"/info/"+this.options.collectionName,context:this,data:{name:this.options.search||void 0}}).done(function(e){5<e?this.render(e):this.remove()})},render:function(e){var t=Math.ceil(e/5),i=this.options.page,n=i||1;return this.$el.html(this.template({anchors:t,active:n})),this},events:{"click a":"goToPage"},goToPage:function(e){e.preventDefault();var t=$(e.target).data("page"),i=this.options.collectionName+"/page/"+t+"/order/"+this.options.order;this.options.search&&(i+="/search/"+this.options.search),APP.router.navigate(i,{trigger:!0})}}),APP.Views.MovieDetails=Backbone.View.extend({tagName:"div",template:JST.movieDetailsTemplate,initialize:function(){this.listenTo(this.model,"change",this.render),this.delegateEvents({"click .edit":_.bind(APP.Router.redirectToEdit,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el)}}),APP.Views.MovieEdit=Backbone.View.extend({tagName:"div",template:JST.movieEditNewViewTemplate,initialize:function(){this.listenToOnce(this.model,"change",this.render),this.listenToOnce(this.model,"destroy",_.bind(APP.Router.redirectToList,this)),this.listenToOnce(this.model,"destroy",APP.showStatisticsView),this.listenToOnce(this.model,"destroy",APP.Messages.showRemoveInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.listenTo(this.model,"update",APP.Messages.showUpdateInfo),this.delegateEvents({"submit form":_.bind(APP.CRUD.updateItem,this),"click .delete":_.bind(APP.CRUD.deleteItem,this)})},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit(),APP.UI.autocomplete(this,"#ms-movie-categories",{name:"categories",data:"/categories",valueField:"name",displayField:"name",placeholder:"Wybierz kategorie",cls:"medium",loadData:!0}),APP.UI.autocomplete(this,"#ms-movie-actors",{name:"actors",data:"/actors",valueField:"name",displayField:"name",placeholder:"Wybierz aktorów",loadData:!0}),APP.UI.datePicker(this,"birthdate","#movie-date"),this},bindings:{"#movie-title":"title","#movie-date":"date","#movie-description":"description","#movie-quantity":"quantity"},events:{"submit form":"updateMovie","click .delete":"deleteMovie"},redirectToMovies:function(){APP.router.navigate("/movies",{trigger:!0})}}),APP.Views.MovieListItem=Backbone.View.extend({tagName:"li",template:JST.movieListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this}}),APP.Views.MovieNew=Backbone.View.extend({tagName:"div",template:JST.movieEditNewViewTemplate,initialize:function(){this.listenTo(this.model,"sync",_.bind(APP.Router.redirectToEdit,this)),this.listenToOnce(this.model,"sync",APP.showStatisticsView),this.listenTo(this.model,"sync",APP.Messages.showAddedInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.delegateEvents({"submit form":_.bind(APP.CRUD.createItem,this)}),this.render()},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),this.stickit(),APP.UI.autocomplete(this,"#ms-movie-categories",{name:"categories",data:"/categories",valueField:"name",displayField:"name",placeholder:"Wybierz kategorie",cls:"medium"}),APP.UI.autocomplete(this,"#ms-movie-actors",{name:"actors",data:"/actors",valueField:"name",displayField:"name",placeholder:"Wybierz aktorów"}),APP.UI.datePicker(this,"birthdate","#movie-date"),this},bindings:{"#movie-title":"title","#movie-date":"date","#movie-description":"description","#movie-quantity":"quantity"}}),APP.Views.MoviesList=Backbone.View.extend({tagName:"ul",className:"app-items-list",initialize:function(e){this.options=e,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=new APP.Views.ListPagination({collectionName:"movies",page:this.options.page,order:this.options.order,search:this.options.search}),t=new APP.Views.ListActions({collectionName:"movies",page:this.options.page,order:this.options.order,search:this.options.search,placeholder:"Szukaj filmów..."});this.childViews=[t,e],this.collection.each(this.addOne,this),APP.Regions.appContent.append(t.render().el),APP.Regions.appContent.append(this.el),APP.Regions.appContent.append(e.render().el)},addOne:function(e){var t=new APP.Views.MovieListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.Navigation={menu:$(".app-sidebar-nav a"),tabs:$(".app-main-tabs"),tabItems:$(".app-main-tabs a"),highlight:function(e){var t=this.tabItems.filter("[href='/"+{movie:"movies",movies:"movies",actor:"actors",actors:"actors",category:"categories",categories:"categories",rent:"rents",rents:"rents",client:"clients",clients:"clients"}[e]+"']"),i=t.parent(),n=i.attr("id"),s=this.menu.filter("[data-id='"+n+"']");this.menu.removeClass("active"),this.tabs.removeClass("active"),this.tabItems.removeClass("active"),s.addClass("active"),i.addClass("active"),t.addClass("active")}},APP.Views.RentDetails=Backbone.View.extend({tagName:"div",template:JST.rentDetailsTemplate,initialize:function(){this.listenTo(this.model,"change",this.render),this.delegateEvents({"click .edit":_.bind(APP.Router.redirectToEdit,this)})},render:function(){var e=this.template(this.model.toJSON());this.$el.html(e),APP.Regions.appContent.html(this.el)}}),APP.Views.RentEdit=Backbone.View.extend({tagName:"div",template:JST.rentEditNewViewTemplate,initialize:function(){this.listenToOnce(this.model,"change",this.render),this.listenToOnce(this.model,"destroy",_.bind(APP.Router.redirectToList,this)),this.listenToOnce(this.model,"destroy",APP.showStatisticsView),this.listenTo(this.model,"destroy",APP.showLatestRentsView),this.listenToOnce(this.model,"destroy",APP.Messages.showRemoveInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.listenTo(this.model,"update",APP.Messages.showUpdateInfo),this.listenTo(this.model,"update",APP.showLatestRentsView),this.delegateEvents({"submit form":_.bind(APP.CRUD.updateItem,this),"click .delete":_.bind(APP.CRUD.deleteItem,this)})},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),APP.UI.autocomplete(this,"#ms-movie-id",{name:"movie_id",data:"/movies",valueField:"_id",displayField:"title",placeholder:"Wybierz film",cls:"medium",loadData:!0,oneAllowed:!0}),APP.UI.autocomplete(this,"#ms-client-id",{name:"client_id",data:"/clients",valueField:"_id",displayField:"name",placeholder:"Wybierz klienta",cls:"medium",loadData:!0,oneAllowed:!0}),this},events:{"submit form":"updateRent","click .delete":"deleteRent"},redirectToRents:function(){APP.router.navigate("/rents",{trigger:!0})}}),APP.Views.RentListItem=Backbone.View.extend({tagName:"li",template:JST.rentListItemTemplate,initialize:function(){this.delegateEvents({click:_.bind(APP.Router.redirectToDetails,this)})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this}}),APP.Views.RentNew=Backbone.View.extend({tagName:"div",template:JST.rentEditNewViewTemplate,initialize:function(){this.listenTo(this.model,"sync",_.bind(APP.Router.redirectToEdit,this)),this.listenToOnce(this.model,"sync",APP.showLatestRentsView),this.listenToOnce(this.model,"sync",APP.showStatisticsView),this.listenTo(this.model,"sync",APP.Messages.showAddedInfo),this.listenTo(this.model,"invalid",_.bind(APP.Messages.showErrorInfo,this)),this.delegateEvents({"submit form":_.bind(APP.CRUD.createItem,this)}),this.render()},render:function(){var e=this.template(this.model.toJSON());this.model;return this.$el.html(e),APP.Regions.appContent.html(this.el),APP.UI.autocomplete(this,"#ms-movie-id",{name:"movie_id",data:"/movies",valueField:"_id",displayField:"title",placeholder:"Wybierz film",cls:"medium",oneAllowed:!0}),APP.UI.autocomplete(this,"#ms-client-id",{name:"client_id",data:"/clients",valueField:"_id",displayField:"name",placeholder:"Wybierz klienta",cls:"medium",oneAllowed:!0}),this}}),APP.Views.RentsList=Backbone.View.extend({tagName:"ul",className:"app-items-list",initialize:function(e){this.options=e,this.listenTo(this.collection,"reset",this.render)},render:function(){var e=new APP.Views.ListPagination({collectionName:"rents",page:this.options.page,order:this.options.order,search:this.options.search}),t=new APP.Views.ListActions({collectionName:"rents",page:this.options.page,order:this.options.order,search:this.options.search,placeholder:"Szukaj wypożyczeń..."});this.childViews=[t,e],this.collection.each(this.addOne,this),APP.Regions.appContent.append(t.render().el),APP.Regions.appContent.append(this.el),APP.Regions.appContent.append(e.render().el)},addOne:function(e){var t=new APP.Views.RentListItem({model:e});this.$el.append(t.render().el)}}),APP.Views.Statistics=Backbone.View.extend({tagName:"div",className:"app-status",template:JST.statisticsWidgetTemplate,initialize:function(){var n=this;$.when($.ajax("/info/movies"),$.ajax("/info/clients"),$.ajax("/info/rents")).then(function(e,t,i){n.render({movies:e[0],clients:t[0],rents:i[0]})})},render:function(e){return this.$el.html(this.template(e)),APP.Regions.appHeader.append(this.el),this}}),APP.Routers.Router=Backbone.Router.extend({initialize:function(){this.route("","movies-list"),this.route("movies(/page/:page)(/order/:order)(/search/:search)","movies-list"),this.route("actors(/page/:page)(/order/:order)(/search/:search)","actors-list"),this.route("categories(/page/:page)(/order/:order)(/search/:search)","categories-list"),this.route("rents(/page/:page)(/order/:order)(/search/:search)","rents-list"),this.route("clients(/page/:page)(/order/:order)(/search/:search)","clients-list"),this.route("movie/:id","movie-details"),this.route("actor/:id","actor-details"),this.route("category/:id","category-details"),this.route("rent/:id","rent-details"),this.route("client/:id","client-details"),this.route("movie/:id/edit","movie-edit"),this.route("actor/:id/edit","actor-edit"),this.route("category/:id/edit","category-edit"),this.route("rent/:id/edit","rent-edit"),this.route("client/:id/edit","client-edit"),this.route("movies/new","movie-new"),this.route("actors/new","actor-new"),this.route("categories/new","category-new"),this.route("rents/new","rent-new"),this.route("clients/new","client-new")}});